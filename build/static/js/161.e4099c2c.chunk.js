/*! For license information please see 161.e4099c2c.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmycareerbuild_portal=self.webpackChunkmycareerbuild_portal||[]).push([[161],{797:(e,a,r)=>{r.d(a,{A:()=>s});const s=(0,r(7784).A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]])},3161:(e,a,r)=>{r.r(a),r.d(a,{default:()=>p});var s=r(9379),t=r(5043),l=r(6446),d=r(6625),o=r(6291),i=r(2339),n=r(6533),c=r(5327),u=r(8693),m=r(4459),g=r(614),b=r(4172),x=r(579);const p=()=>{const{user:e,isEmployee:a}=(0,d.A)(),[r,p]=(0,t.useState)(null),[h,y]=(0,t.useState)({name:"",professionalTitle:"",languages:"",age:"",currentSalary:"",expectedSalary:"",description:"",phone:"",email:"",country:"",postcode:"",city:"",fullAddress:""}),[f,v]=(0,t.useState)(!0),[j,N]=(0,t.useState)(!1),[w,A]=(0,t.useState)(!1),[S,k]=(0,t.useState)(null),[C,P]=(0,t.useState)({}),[T,E]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{if(e){v(!0);try{const a=await o.lu.fetchUserById(e.id),r={name:a.name||"",professionalTitle:a.professionalTitle||a.jobTitle||"",languages:a.languages||"",age:a.age||"",currentSalary:a.currentSalary||"",expectedSalary:a.expectedSalary||"",description:a.description||a.bio||"",phone:a.phone||"",email:a.email||"",country:a.country||"",postcode:a.postcode||"",city:a.city||a.location||"",fullAddress:a.fullAddress||a.address||""};y(r),k(r),p(a)}catch(a){console.error("Error loading user data:",a),i.Ay.error("Failed to load profile data")}finally{v(!1)}}})()},[e]);const O=e=>{const{name:a,value:r}=e.target;y(e=>(0,s.A)((0,s.A)({},e),{},{[a]:r})),C[a]&&P(e=>(0,s.A)((0,s.A)({},e),{},{[a]:""}))};return f?(0,x.jsx)("div",{className:"min-h-screen p-6 bg-gray-50 flex items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin mx-auto mb-4"}),(0,x.jsx)("p",{className:"text-gray-600",children:"Loading profile data..."})]})}):(0,x.jsx)("div",{className:"min-h-screen pt-0 pb-6 px-6 bg-gray-50",children:(0,x.jsxs)("div",{className:"w-full max-w-7xl mx-auto border-2 border-gray-300 rounded-2xl p-6",children:[(0,x.jsx)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-200 mb-6",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Profile Settings"}),(0,x.jsx)("div",{className:"flex items-center gap-3",children:w?(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:async()=>{if((()=>{const e={};return Object.keys(h).forEach(a=>{const r=((e,a)=>{switch(e){case"name":return""===a.trim()?"Name is required":"";case"email":const e=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return""===a.trim()?"Email is required":e.test(a)?"":"Email is invalid";case"phone":const r=/^[+]?[1-9][\d]{0,15}$/;return""===a.trim()||r.test(a.replace(/[\s\-()]/g,""))?"":"Phone number is invalid";default:return""}})(a,h[a]);r&&(e[a]=r)}),P(e),0===Object.keys(e).length})()){if(e){N(!0),E(null);try{console.log("\ud83d\udd04 Saving profile data:",h);const e=await o.lu.updateProfile({name:h.name,professionalTitle:h.professionalTitle,languages:h.languages,age:h.age,currentSalary:h.currentSalary,expectedSalary:h.expectedSalary,description:h.description,phone:h.phone,country:h.country,postcode:h.postcode,city:h.city,fullAddress:h.fullAddress});if(console.log("\u2705 Profile update response:",e),e.user){const a={name:e.user.name||"",professionalTitle:e.user.professionalTitle||"",languages:e.user.languages||"",age:e.user.age||"",currentSalary:e.user.currentSalary||"",expectedSalary:e.user.expectedSalary||"",description:e.user.description||"",phone:e.user.phone||"",email:e.user.email||"",country:e.user.country||"",postcode:e.user.postcode||"",city:e.user.city||"",fullAddress:e.user.fullAddress||""};y(a),k(a),p(e.user)}A(!1),i.Ay.success("Profile updated successfully \u2705")}catch(a){console.error("\u274c Error saving profile:",a),i.Ay.error("Failed to update profile \u274c")}finally{N(!1)}}}else i.Ay.error("Please fix validation errors before saving")},disabled:j,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,x.jsx)(u.A,{size:16}),j?"Saving...":"Save"]}),(0,x.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{S&&y(S),A(!1),P({})},disabled:j,className:"bg-gray-600 hover:bg-gray-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,x.jsx)(g.A,{size:16}),"Cancel"]})]}):(0,x.jsxs)(l.P.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{A(!0),P({})},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,x.jsx)(n.A,{size:16}),"Edit Profile"]})})]})}),T&&(0,x.jsx)("div",{className:"mb-6 p-4 rounded-lg ".concat("success"===T.type?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"),children:T.text}),(0,x.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-200 mb-6",children:[(0,x.jsxs)("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800 mb-6",children:[(0,x.jsx)(m.A,{size:20,className:"text-blue-600"}),"PROFILE PHOTO"]}),(0,x.jsx)("div",{className:"flex justify-center",children:(0,x.jsx)(b.A,{currentAvatarUrl:null===r||void 0===r?void 0:r.avatarUrl,userName:(null===r||void 0===r?void 0:r.name)||(null===e||void 0===e?void 0:e.name)||"User",userTitle:(null===r||void 0===r?void 0:r.professionalTitle)||(null===r||void 0===r?void 0:r.jobTitle)||"Professional",onAvatarUpdate:e=>{r&&p((0,s.A)((0,s.A)({},r),{},{avatarUrl:e}))},size:"lg",showName:!0,showTitle:!0})}),(0,x.jsxs)("div",{className:"mt-4 text-center text-sm text-gray-500",children:[(0,x.jsx)("p",{children:"Click the camera icon to upload a new profile photo"}),(0,x.jsx)("p",{className:"text-xs mt-1",children:"Supported formats: JPEG, PNG, WebP (Max 5MB)"})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-200 mb-6",children:[(0,x.jsxs)("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800 mb-6",children:[(0,x.jsx)(m.A,{size:20,className:"text-blue-600"}),"BASIC INFORMATION"]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name *"}),(0,x.jsx)("input",{type:"text",name:"name",value:h.name,onChange:O,placeholder:"e.g. John Doe",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500 ".concat(C.name?"border-red-500":"border-gray-300"),disabled:!w}),C.name&&(0,x.jsx)("span",{className:"text-red-500 text-sm mt-1",children:C.name})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Professional Title"}),(0,x.jsx)("input",{type:"text",name:"professionalTitle",value:h.professionalTitle,onChange:O,placeholder:"e.g. Web Developer, Designer",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Languages"}),(0,x.jsx)("input",{type:"text",name:"languages",value:h.languages,onChange:O,placeholder:"e.g. English, Spanish, French",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Age"}),(0,x.jsx)("input",{type:"text",name:"age",value:h.age,onChange:O,placeholder:"e.g. 25 Years",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Salary ($)"}),(0,x.jsx)("input",{type:"text",name:"currentSalary",value:h.currentSalary,onChange:O,placeholder:"e.g. 50000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expected Salary"}),(0,x.jsx)("input",{type:"text",name:"expectedSalary",value:h.expectedSalary,onChange:O,placeholder:"e.g. 60000",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]})]}),(0,x.jsxs)("div",{className:"mt-6",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,x.jsx)("textarea",{name:"description",value:h.description,onChange:O,placeholder:"Tell us about yourself, your experience, and what makes you unique...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",rows:4,disabled:!w})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-md border border-gray-200",children:[(0,x.jsxs)("h2",{className:"flex items-center gap-2 text-lg font-semibold text-gray-800 mb-6",children:[(0,x.jsx)(c.A,{size:20,className:"text-blue-600"}),"CONTACT INFORMATION"]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),(0,x.jsx)("input",{type:"text",name:"phone",value:h.phone,onChange:O,placeholder:"e.g. +1 234 567 8900",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500 ".concat(C.phone?"border-red-500":"border-gray-300"),disabled:!w}),C.phone&&(0,x.jsx)("span",{className:"text-red-500 text-sm mt-1",children:C.phone})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,x.jsx)("input",{type:"email",name:"email",value:h.email,onChange:O,placeholder:"e.g. john.doe@email.com",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500 ".concat(C.email?"border-red-500":"border-gray-300"),disabled:!w}),C.email&&(0,x.jsx)("span",{className:"text-red-500 text-sm mt-1",children:C.email})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,x.jsx)("input",{type:"text",name:"country",value:h.country,onChange:O,placeholder:"e.g. United States",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Postcode"}),(0,x.jsx)("input",{type:"text",name:"postcode",value:h.postcode,onChange:O,placeholder:"e.g. 12345",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,x.jsx)("input",{type:"text",name:"city",value:h.city,onChange:O,placeholder:"e.g. New York",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Address"}),(0,x.jsx)("input",{type:"text",name:"fullAddress",value:h.fullAddress,onChange:O,placeholder:"e.g. 123 Main St, Apt 4B",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",disabled:!w})]})]})]})]})})}},4172:(e,a,r)=>{r.d(a,{A:()=>m});var s=r(5043),t=r(9570),l=r(6446),d=r(797);const o=(0,r(7784).A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var i=r(614),n=r(6291),c=r(2339),u=r(579);const m=e=>{let{currentAvatarUrl:a,userName:r="User",onAvatarUpdate:m,size:g="md",showName:b=!0,showTitle:x=!0,userTitle:p="Professional"}=e;const[h,y]=(0,s.useState)(!1),[f,v]=(0,s.useState)(0),[j,N]=(0,s.useState)(null),[w,A]=(0,s.useState)(!1),S=(0,s.useRef)(null),k={sm:{avatar:"w-12 h-12",camera:"w-4 h-4",cameraButton:"w-5 h-5"},md:{avatar:"w-16 h-16",camera:"w-3 h-3",cameraButton:"w-6 h-6"},lg:{avatar:"w-24 h-24",camera:"w-4 h-4",cameraButton:"w-8 h-8"}}[g],C=e=>{const a=(e=>["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type)?e.size>5242880?"File size must be less than 5MB":null:"Please upload a valid image file (JPEG, PNG, or WebP)")(e);if(a)return void c.Ay.error(a);const r=URL.createObjectURL(e);N(r),P(e)},P=async e=>{y(!0),v(0);try{const a=setInterval(()=>{v(e=>e>=90?(clearInterval(a),90):e+10)},200),r=await n.R2.uploadAvatar(e);clearInterval(a),v(100),m&&m(r.avatarUrl),c.Ay.success("Profile photo updated successfully! \ud83c\udf89"),setTimeout(()=>{N(null),v(0),y(!1)},1e3)}catch(a){console.error("Upload error:",a),c.Ay.error(a.message||"Failed to upload photo. Please try again."),N(null),v(0),y(!1)}},T=()=>{var e;null===(e=S.current)||void 0===e||e.click()};return(0,u.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,u.jsxs)("div",{className:"relative mb-4",children:[(0,u.jsxs)("div",{className:"".concat(k.avatar," rounded-full border-2 border-gray-300 bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center text-xl font-bold text-white overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-lg ").concat(w?"border-blue-500 shadow-lg":""),onDragOver:e=>{e.preventDefault(),A(!0)},onDragLeave:e=>{e.preventDefault(),A(!1)},onDrop:e=>{var a;e.preventDefault(),A(!1);const r=null===(a=e.dataTransfer.files)||void 0===a?void 0:a[0];r&&C(r)},onClick:T,children:[j?(0,u.jsx)("img",{src:j,alt:"Preview",className:"w-full h-full object-cover"}):a?(()=>{const e=/^https?:\/\//i.test(a)?a:"".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:4000").concat(a.startsWith("/")?"":"/").concat(a);return(0,u.jsx)("img",{src:e,alt:r,className:"w-full h-full object-cover"})})():(0,u.jsx)("span",{children:(E=r,E.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2))}),(0,u.jsx)(t.N,{children:h&&(0,u.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center text-white",children:[(0,u.jsx)("div",{className:"w-8 h-8 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto mb-2"}),(0,u.jsxs)("div",{className:"text-xs",children:[f,"%"]})]})})}),(0,u.jsx)(t.N,{children:w&&!h&&(0,u.jsx)(l.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:(0,u.jsxs)("div",{className:"text-center text-blue-600",children:[(0,u.jsx)(d.A,{className:"w-6 h-6 mx-auto mb-1"}),(0,u.jsx)("div",{className:"text-xs font-medium",children:"Drop image here"})]})})})]}),(0,u.jsx)("button",{className:"absolute -bottom-1 -right-1 ".concat(k.cameraButton," bg-white border-2 border-blue-500 rounded-full flex items-center justify-center hover:bg-blue-50 transition-colors duration-200 shadow-sm disabled:opacity-50 disabled:cursor-not-allowed"),onClick:T,disabled:h,children:h?(0,u.jsx)("div",{className:"w-3 h-3 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):(0,u.jsx)(o,{className:"".concat(k.camera," text-blue-500")})}),(0,u.jsx)(t.N,{children:h&&(0,u.jsx)(l.P.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 border-2 border-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors duration-200 shadow-sm",onClick:()=>{N(null),v(0),y(!1),S.current&&(S.current.value="")},children:(0,u.jsx)(i.A,{className:"w-3 h-3 text-white"})})})]}),b&&(0,u.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-1",children:r}),x&&(0,u.jsx)("p",{className:"text-sm text-gray-500",children:p}),(0,u.jsx)("input",{ref:S,type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:e=>{var a;const r=null===(a=e.target.files)||void 0===a?void 0:a[0];r&&C(r)},className:"hidden"}),(0,u.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"Click camera icon to upload photo"})]});var E}},6533:(e,a,r)=>{r.d(a,{A:()=>s});const s=(0,r(7784).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8693:(e,a,r)=>{r.d(a,{A:()=>s});const s=(0,r(7784).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}}]);
//# sourceMappingURL=161.e4099c2c.chunk.js.map