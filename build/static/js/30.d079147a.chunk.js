"use strict";(self.webpackChunkmycareerbuild_portal=self.webpackChunkmycareerbuild_portal||[]).push([[30],{3030:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(9379),l=t(5043);const i={container:"NotificationDashboard_container__yAAZH",heading:"NotificationDashboard_heading__gBpa2",cardGrid:"NotificationDashboard_cardGrid__zpFJB",card:"NotificationDashboard_card__SFWzh",cardLabel:"NotificationDashboard_cardLabel__lXlJH",cardValue:"NotificationDashboard_cardValue__pdni2",cardSubtext:"NotificationDashboard_cardSubtext__g4uR7",section:"NotificationDashboard_section__odYg3",sectionTitle:"NotificationDashboard_sectionTitle__kBrHa",actionsRow:"NotificationDashboard_actionsRow__6ShGW",searchRow:"NotificationDashboard_searchRow__egKt1",button:"NotificationDashboard_button__QmiZi",buttonGhost:"NotificationDashboard_buttonGhost__893F4",buttonMuted:"NotificationDashboard_buttonMuted__fXLN7",table:"NotificationDashboard_table__-fdCP",tableHeader:"NotificationDashboard_tableHeader__mfsLz",tableCell:"NotificationDashboard_tableCell__oQfyI",badge:"NotificationDashboard_badge__7rgoZ",badgeSuccess:"NotificationDashboard_badgeSuccess__cWvuX",badgeWarning:"NotificationDashboard_badgeWarning__rcFHc",badgeMuted:"NotificationDashboard_badgeMuted__iENWn",message:"NotificationDashboard_message__WICDv",messageSuccess:"NotificationDashboard_messageSuccess__BhWIE",messageError:"NotificationDashboard_messageError__d2MWI",form:"NotificationDashboard_form__7frmD",fileInput:"NotificationDashboard_fileInput__+trVY",list:"NotificationDashboard_list__TjJ1l",codeBlock:"NotificationDashboard_codeBlock__eJ4ri",textInput:"NotificationDashboard_textInput__NP2fy",helperText:"NotificationDashboard_helperText__0jXNI",paginationRow:"NotificationDashboard_paginationRow__nAQBe",paginationButtons:"NotificationDashboard_paginationButtons__tiiWu",pill:"NotificationDashboard_pill__I41wK"};var n=t(9722),c=t(6291);const r="".concat(c.JR,"/notifications");class o{constructor(){}static getInstance(){return o.instance||(o.instance=new o),o.instance}async request(e,a){try{const{method:t="GET",adminKey:l,marketingToken:i,data:c,params:o,headers:d={}}=a,h=(0,s.A)({"X-Admin-Key":l},d);i&&(h["X-Marketing-Token"]=i);return(await(0,n.A)({method:t,url:"".concat(r).concat(e),headers:h,data:c,params:o})).data}catch(o){var t,l,i,c;if(n.A.isAxiosError(o))throw new Error((null===(t=o.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.error)||(null===(i=o.response)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.message)||o.message);throw o}}async fetchFresherJobs(e){return this.request("/jobs/freshers",{adminKey:e.adminKey,params:{includeNotified:e.includeNotified}})}async fetchLogs(e,a){return this.request("/logs",{adminKey:e,params:{limit:a}})}async fetchMarketingHealth(e){return this.request("/marketing/health",{adminKey:e,marketingToken:e})}async fetchMarketingContacts(e){return this.request("/marketing/contacts",{adminKey:e.adminKey,params:{page:e.page,pageSize:e.pageSize,search:e.search,sortBy:e.sortBy,sortDirection:e.sortDirection}})}async createMarketingContact(e){return this.request("/marketing/contacts",{method:"POST",adminKey:e.adminKey,data:{fullName:e.payload.fullName,email:e.payload.email,mobileNo:e.payload.mobileNo,branch:e.payload.branch,experience:e.payload.experience}})}async updateMarketingContact(e){return this.request("/marketing/contacts/".concat(e.contactId),{method:"PUT",adminKey:e.adminKey,data:{fullName:e.payload.fullName,email:e.payload.email,mobileNo:e.payload.mobileNo,branch:e.payload.branch,experience:e.payload.experience}})}async deleteMarketingContact(e){return this.request("/marketing/contacts/".concat(e.contactId),{method:"DELETE",adminKey:e.adminKey})}async fetchFresherSubscribers(e){return this.request("/subscribers",{adminKey:e.adminKey,params:{page:e.page,pageSize:e.pageSize,search:e.search}})}async uploadSubscribersCsv(e,a){const t=new FormData;return t.append("file",e),this.request("/upload-csv",{method:"POST",adminKey:a,data:t,headers:{"Content-Type":"multipart/form-data"}})}async triggerMarketingDigest(e){return this.request("/marketing/trigger",{method:"POST",adminKey:e.adminKey,data:{force:e.force}})}}o.instance=void 0;const d=o.getInstance();var h=t(579);const u="mcbAdminKey",m=()=>({fullName:"",email:"",mobileNo:"",branch:"",experience:""}),b=()=>({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),g=()=>({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),p=e=>{if(!e)return"\u2014";try{return new Date(e).toLocaleString()}catch(a){return e}},x=()=>{var e,a,t;const[n,r]=(0,l.useState)(""),[o,x]=(0,l.useState)(""),[N,v]=(0,l.useState)(!0),[f,j]=(0,l.useState)([]),[y,k]=(0,l.useState)({success:[],failed:[]}),[_,C]=(0,l.useState)(null),[S,P]=(0,l.useState)(null),[w,D]=(0,l.useState)(null),[M,I]=(0,l.useState)(null),[T,R]=(0,l.useState)([]),[F,K]=(0,l.useState)(b),[A,E]=(0,l.useState)(1),[H,B]=(0,l.useState)(""),[G,L]=(0,l.useState)(""),[z,W]=(0,l.useState)(!1),[q,J]=(0,l.useState)(m),[U,V]=(0,l.useState)(null),[O,X]=(0,l.useState)(!1),[Q,Z]=(0,l.useState)(null),[Y,$]=(0,l.useState)([]),[ee,ae]=(0,l.useState)(g),[te,se]=(0,l.useState)(1),[le,ie]=(0,l.useState)(""),[ne,ce]=(0,l.useState)(""),[re,oe]=(0,l.useState)(!1),[de,he]=(0,l.useState)(""),[ue,me]=(0,l.useState)(""),[be,ge]=(0,l.useState)(!1),[pe,xe]=(0,l.useState)(!1),[Ne,ve]=(0,l.useState)(!1),[fe,je]=(0,l.useState)(!1),ye=(0,l.useRef)(null);(0,l.useEffect)(()=>{const e=localStorage.getItem(u);e&&(r(e),x(e))},[]);const ke=(0,l.useCallback)(()=>{j([]),k({success:[],failed:[]}),C(null),P(null),D(null),I(null),R([]),K({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),E(1),L(""),B(""),J({fullName:"",email:"",mobileNo:"",branch:"",experience:""}),V(null),X(!1),Z(null),W(!1),$([]),ae({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}),se(1),ce(""),ie(""),oe(!1)},[]),_e=(0,l.useCallback)(()=>{he(""),me("")},[]),Ce=(0,l.useCallback)(()=>{localStorage.removeItem(u),r(""),x(""),ke()},[ke]),Se=(0,l.useCallback)(e=>{const a=e||"Failed to process request";me(a),a.toLowerCase().includes("admin key")&&Ce()},[Ce]),Pe=(0,l.useCallback)(async e=>{var a;const t=null===(a=null!==e&&void 0!==e?e:n)||void 0===a?void 0:a.trim();if(t){ge(!0);try{var s;const e=await c.vW.fetchFresherJobs({adminKey:t,includeNotified:!0});j((null===(s=e.data)||void 0===s?void 0:s.jobs)||[]),e.message&&he(e.message)}catch(l){Se(null===l||void 0===l?void 0:l.message)}finally{ge(!1)}}else j([])},[n,Se]),we=(0,l.useCallback)(async e=>{var a;const t=null===(a=null!==e&&void 0!==e?e:n)||void 0===a?void 0:a.trim();if(t){xe(!0);try{const e=await c.vW.fetchLogs(t,50);k(e.data||{success:[],failed:[]})}catch(s){Se(null===s||void 0===s?void 0:s.message)}finally{xe(!1)}}else k({success:[],failed:[]})},[n,Se]),De=(0,l.useCallback)(async e=>{var a;const t=null===(a=null!==e&&void 0!==e?e:n)||void 0===a?void 0:a.trim();if(t)try{const e=await d.fetchMarketingHealth(t);if(e.success&&e.data){var s,l,i,c,r,o;const a=e.data;D({lastRunAt:null!==(s=a.last_run_at)&&void 0!==s?s:null,lastBatchId:null!==(l=a.last_batch_id)&&void 0!==l?l:null,pendingJobsCount:null!==(i=a.pending_jobs_count)&&void 0!==i?i:0,failureRate24h:null!==(c=a.failure_rate_24h)&&void 0!==c?c:0,runs24h:null!==(r=a.runs_24h)&&void 0!==r?r:0,failures24h:null!==(o=a.failures_24h)&&void 0!==o?o:0})}}catch(h){console.error("Failed to load marketing health",h)}else D(null)},[n]),Me=(0,l.useCallback)(async function(e){var a,t,s;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null===(a=null!==e&&void 0!==e?e:n)||void 0===a?void 0:a.trim();if(!i)return R([]),void K({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1});const c=null!==(t=l.page)&&void 0!==t?t:A,r=null!==(s=l.search)&&void 0!==s?s:G;W(!0);try{const e=(await d.fetchMarketingContacts({adminKey:i,page:c,pageSize:10,search:r||void 0})).data||{contacts:[],pagination:{page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}};if(R(e.contacts||[]),e.pagination)K(e.pagination),e.pagination.page&&e.pagination.page!==A&&E(e.pagination.page);else{var o,h;const a={page:c,pageSize:10,total:null!==(o=null===(h=e.contacts)||void 0===h?void 0:h.length)&&void 0!==o?o:0,totalPages:e.contacts&&e.contacts.length>0?1:0,hasNextPage:!1,hasPrevPage:c>1};K(a)}}catch(u){Se((null===u||void 0===u?void 0:u.message)||"Failed to load marketing contacts")}finally{W(!1)}},[n,A,G,Se]),Ie=(0,l.useCallback)(async function(e){var a,t,s;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=null===(a=null!==e&&void 0!==e?e:n)||void 0===a?void 0:a.trim();if(!i)return $([]),void ae({page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1});const c=null!==(t=l.page)&&void 0!==t?t:te,r=null!==(s=l.search)&&void 0!==s?s:ne;oe(!0);try{const e=(await d.fetchFresherSubscribers({adminKey:i,page:c,pageSize:10,search:r||void 0})).data||{subscribers:[],pagination:{page:1,pageSize:10,total:0,totalPages:0,hasNextPage:!1,hasPrevPage:!1}};if($(e.subscribers||[]),e.pagination)ae(e.pagination),e.pagination.page&&e.pagination.page!==te&&se(e.pagination.page);else{var o,h;const a={page:c,pageSize:10,total:null!==(o=null===(h=e.subscribers)||void 0===h?void 0:h.length)&&void 0!==o?o:0,totalPages:e.subscribers&&e.subscribers.length>0?1:0,hasNextPage:!1,hasPrevPage:c>1};ae(a)}}catch(u){Se((null===u||void 0===u?void 0:u.message)||"Failed to load subscribers")}finally{oe(!1)}},[n,te,ne,Se]);(0,l.useEffect)(()=>{n.trim()&&Me(void 0,{page:A,search:G})},[n,A,G,Me]),(0,l.useEffect)(()=>{n.trim()&&Ie(void 0,{page:te,search:ne})},[n,te,ne,Ie]);const Te=(0,l.useCallback)(async e=>{e.preventDefault(),_e();const a=o.trim();a?(r(a),v(!1),localStorage.setItem(u,a),E(1),L(""),B(""),se(1),ce(""),ie(""),await Promise.all([Pe(a),we(a),De(a),Me(a,{page:1,search:""}),Ie(a,{page:1,search:""})])):Se("Please enter the admin key.")},[o,Se,Pe,we,De,Me,Ie,_e]),Re=(0,l.useCallback)(()=>{_e(),v(!0),Ce()},[Ce,_e]),Fe=(0,l.useCallback)(e=>a=>{const t=a.target.value;J(a=>(0,s.A)((0,s.A)({},a),{},{[e]:t}))},[]),Ke=(0,l.useCallback)(async e=>{e.preventDefault(),_e();const a=n.trim();if(!a)return void Se("Enter the admin key before managing contacts.");const t={fullName:q.fullName.trim(),email:q.email.trim(),mobileNo:q.mobileNo.trim(),branch:q.branch.trim(),experience:q.experience.trim()};if(t.fullName)if(t.email){X(!0);try{U?(await d.updateMarketingContact({adminKey:a,contactId:U,payload:t}),he("Marketing contact updated."),await Me(void 0,{page:A,search:G})):(await d.createMarketingContact({adminKey:a,payload:t}),he("Marketing contact created."),1!==A&&E(1),await Me(void 0,{page:1,search:G})),J({fullName:"",email:"",mobileNo:"",branch:"",experience:""}),V(null)}catch(s){Se((null===s||void 0===s?void 0:s.message)||"Failed to save marketing contact")}finally{X(!1)}}else Se("Contact email is required.");else Se("Contact full name is required.")},[n,q,U,Se,Me,A,G,_e]),Ae=(0,l.useCallback)(e=>{var a,t,s;_e(),V(e.id),J({fullName:e.fullName,email:e.email,mobileNo:null!==(a=e.mobileNo)&&void 0!==a?a:"",branch:null!==(t=e.branch)&&void 0!==t?t:"",experience:null!==(s=e.experience)&&void 0!==s?s:""})},[_e]),Ee=(0,l.useCallback)(()=>{_e(),V(null),J({fullName:"",email:"",mobileNo:"",branch:"",experience:""})},[_e]),He=(0,l.useCallback)(async e=>{const a=n.trim();if(a){if(window.confirm("Are you sure you want to delete this marketing contact?")){Z(e),_e();try{await d.deleteMarketingContact({adminKey:a,contactId:e}),he("Marketing contact deleted."),T.length<=1&&A>1?E(e=>Math.max(e-1,1)):await Me(void 0,{page:A,search:G})}catch(t){Se((null===t||void 0===t?void 0:t.message)||"Failed to delete marketing contact")}finally{Z(null)}}}else Se("Enter the admin key before managing contacts.")},[n,Se,Me,T.length,A,G,_e]),Be=(0,l.useCallback)(async e=>{e.preventDefault(),_e();if(!n.trim())return void Se("Enter the admin key before managing contacts.");const a=H.trim();L(a),E(1),await Me(void 0,{page:1,search:a})},[n,Se,Me,H,_e]),Ge=(0,l.useCallback)(async()=>{(G||""!==H)&&(_e(),B(""),L(""),E(1),n.trim()&&await Me(void 0,{page:1,search:""}))},[n,Me,G,H,_e]),Le=(0,l.useCallback)(()=>{F.hasNextPage&&E(e=>e+1)},[F.hasNextPage]),ze=(0,l.useCallback)(()=>{F.hasPrevPage&&E(e=>Math.max(e-1,1))},[F.hasPrevPage]),We=(0,l.useCallback)(async()=>{n.trim()?(_e(),await Me(void 0,{page:A,search:G})):Se("Enter the admin key before managing contacts.")},[n,Se,Me,A,G,_e]),qe=(0,l.useCallback)(async e=>{e.preventDefault(),_e();if(!n.trim())return void Se("Enter the admin key before managing subscribers.");const a=le.trim();ce(a),se(1),await Ie(void 0,{page:1,search:a})},[n,Se,Ie,le,_e]),Je=(0,l.useCallback)(async()=>{(ne||""!==le)&&(_e(),ie(""),ce(""),se(1),n.trim()&&await Ie(void 0,{page:1,search:""}))},[n,Ie,ne,le,_e]),Ue=(0,l.useCallback)(()=>{ee.hasNextPage&&se(e=>e+1)},[ee.hasNextPage]),Ve=(0,l.useCallback)(()=>{ee.hasPrevPage&&se(e=>Math.max(e-1,1))},[ee.hasPrevPage]),Oe=(0,l.useCallback)(async()=>{n.trim()?(_e(),await Ie(void 0,{page:te,search:ne})):Se("Enter the admin key before managing subscribers.")},[n,Se,Ie,te,ne,_e]),Xe=(0,l.useMemo)(()=>{if(!w)return[{label:"Pending Jobs",value:"-",subtext:"Awaiting marketing digest"},{label:"Last Run",value:"-",subtext:"No data yet"},{label:"Failure Rate (24h)",value:"-",subtext:"Monitor delivery health"},{label:"Runs (24h)",value:"-",subtext:"Success / total"}];const e="".concat(w.failureRate24h.toFixed(2),"%"),a="".concat(w.runs24h-w.failures24h,"/").concat(w.runs24h);return[{label:"Pending Jobs",value:w.pendingJobsCount,subtext:"Awaiting marketing digest"},{label:"Last Run",value:p(w.lastRunAt),subtext:w.lastBatchId?"Batch ".concat(w.lastBatchId):"No batch id yet"},{label:"Failure Rate (24h)",value:e,subtext:"Monitor delivery health"},{label:"Runs (24h)",value:a,subtext:"".concat(w.failures24h," failures")}]},[w]),Qe=n.trim().length>0;return(0,h.jsx)("div",{className:i.container,children:N?(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Admin Access"}),(0,h.jsxs)("form",{onSubmit:Te,className:i.form,children:[(0,h.jsx)("input",{type:"password",value:o,onChange:e=>x(e.target.value),placeholder:"Enter Admin Key",className:i.textInput,autoFocus:!0}),(0,h.jsx)("button",{type:"submit",className:i.button,children:"Access Dashboard"})]}),ue&&(0,h.jsx)("div",{className:i.messageError,children:ue})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:i.actionsRow,children:(0,h.jsx)("button",{onClick:Re,className:i.buttonMuted,children:"Reset Admin Key"})}),(0,h.jsx)("div",{className:i.cardGrid,children:Xe.map((e,a)=>(0,h.jsxs)("div",{className:i.card,children:[(0,h.jsx)("div",{className:i.cardLabel,children:e.label}),(0,h.jsx)("div",{className:i.cardValue,children:e.value}),(0,h.jsx)("div",{className:i.cardSubtext,children:e.subtext})]},a))}),de&&(0,h.jsx)("div",{className:i.messageSuccess,children:de}),ue&&(0,h.jsx)("div",{className:i.messageError,children:ue}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Upload Subscriber CSV"}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),_){ve(!0),_e();try{const e=await c.vW.uploadSubscribersCsv(_,n);P(e.data||null),he(e.message||"Subscriber list processed successfully."),ye.current&&(ye.current.value=""),C(null),await Promise.all([Pe(n),we(n)])}catch(a){Se((null===a||void 0===a?void 0:a.message)||"Failed to upload subscriber CSV")}finally{ve(!1)}}else Se("Please choose a CSV file that contains name and email columns.")},className:i.form,children:[(0,h.jsx)("input",{ref:ye,type:"file",accept:".csv",onChange:e=>{_e();const a=e.target.files&&e.target.files[0];C(a||null),P(null)},className:i.fileInput}),(0,h.jsx)("button",{type:"submit",className:i.button,disabled:Ne,children:Ne?"Uploading\u2026":"Upload CSV"}),_&&(0,h.jsx)("span",{className:i.helperText,children:_.name})]}),S&&(0,h.jsxs)("div",{className:i.list,children:[(0,h.jsx)("h3",{children:"Upload Summary"}),(0,h.jsxs)("div",{children:["Processed rows: ",S.processed]}),(0,h.jsxs)("div",{children:["Inserted: ",S.inserted]}),(0,h.jsxs)("div",{children:["Updated: ",S.updated]}),(0,h.jsxs)("div",{children:["Skipped: ",S.skipped]}),null!==(e=S.errors)&&void 0!==e&&e.length?(0,h.jsxs)("details",{children:[(0,h.jsxs)("summary",{children:[S.errors.length," issue(s)"]}),(0,h.jsxs)("div",{className:i.codeBlock,children:[S.errors.slice(0,10).map((e,a)=>"Row ".concat(e.row,": ").concat(e.email||"unknown"," \u2014 ").concat(e.message)).join("\n"),S.errors.length>10&&"\n\u2026"]})]}):null]})]}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Trigger Marketing Digest"}),(0,h.jsx)("div",{className:i.actionsRow,children:(0,h.jsx)("button",{onClick:async()=>{je(!0),_e();try{const e=await d.triggerMarketingDigest({adminKey:n,force:!0});e.success&&(I(e.data||null),he(e.message||"Marketing digest triggered successfully.")),await Promise.all([De(n),we(n),Pe(n)])}catch(e){Se((null===e||void 0===e?void 0:e.message)||"Failed to trigger marketing digest")}finally{je(!1)}},className:i.button,disabled:fe,children:fe?"Sending\u2026":"Send Digest Now"})}),M&&(0,h.jsxs)("div",{className:i.list,children:[(0,h.jsx)("h3",{children:"Last Run Summary"}),(0,h.jsxs)("div",{children:["Status: ",M.ok?"Success":M.skipped?"Skipped":"Completed with issues"]}),(0,h.jsxs)("div",{children:["Batch ID: ",M.batchId]}),(0,h.jsxs)("div",{children:["Jobs queried: ",M.jobsQueried]}),(0,h.jsxs)("div",{children:["Jobs included: ",M.jobsIncluded]}),(0,h.jsxs)("div",{children:["Contacts attempted: ",M.contactsAttempted]}),(0,h.jsxs)("div",{children:["Contacts succeeded: ",M.contactsSucceeded]}),(0,h.jsxs)("div",{children:["Contacts failed: ",M.contactsFailed]}),(0,h.jsxs)("div",{children:["Started: ",p(M.startedAt)]}),(0,h.jsxs)("div",{children:["Finished: ",p(M.finishedAt)]}),M.reason&&(0,h.jsxs)("div",{children:["Reason: ",M.reason]}),M.errors&&M.errors.length>0&&(0,h.jsxs)("details",{children:[(0,h.jsxs)("summary",{children:["View errors (",M.errors.length,")"]}),(0,h.jsx)("div",{className:i.codeBlock,children:M.errors.map((e,a)=>"".concat(a+1,". ").concat("string"===typeof e?e:JSON.stringify(e))).join("\n")})]})]})]}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Fresher Notification Subscribers"}),Qe?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:i.form,onSubmit:qe,children:[(0,h.jsx)("input",{type:"text",value:le,onChange:e=>ie(e.target.value),placeholder:"Search subscribers by name or email...",className:i.textInput}),(0,h.jsx)("button",{type:"submit",className:i.buttonGhost,disabled:re,children:"Search"}),(ne||le)&&(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Je,disabled:re,children:"Clear"}),(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Oe,disabled:re,children:"Refresh"})]}),re?(0,h.jsx)("p",{children:"Loading subscribers\u2026"}):0===Y.length?(0,h.jsx)("p",{children:"No subscribers found."}):(0,h.jsx)("div",{className:i.tableContainer,children:(0,h.jsxs)("table",{className:i.table,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:i.tableHeader,children:"Full name"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Email"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Mobile"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Branch"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Experience"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Subscribed At"})]})}),(0,h.jsx)("tbody",{children:Y.map(e=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:i.tableCell,children:e.fullName||"Subscriber"}),(0,h.jsx)("td",{className:i.tableCell,children:e.email}),(0,h.jsx)("td",{className:i.tableCell,children:e.mobileNo||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.branch||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.experience||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:p(e.createdAt)})]},e.id))})]})}),(0,h.jsxs)("div",{className:i.actionsRow,children:[(0,h.jsx)("span",{className:i.helperText,children:ee.total>0?"Page ".concat(ee.page," of ").concat(Math.max(ee.totalPages,1)," \u2022 Total subscribers: ").concat(ee.total):"No subscribers available"}),(0,h.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Ve,disabled:!ee.hasPrevPage||re,children:"Previous"}),(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Ue,disabled:!ee.hasNextPage||re,children:"Next"})]})]})]}):(0,h.jsx)("p",{children:"Please enter the admin key to view subscribers."})]}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Marketing Contacts"}),Qe?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("form",{className:i.form,onSubmit:Ke,children:[(0,h.jsx)("input",{type:"text",value:q.fullName,onChange:Fe("fullName"),placeholder:"Full name",className:i.textInput,required:!0}),(0,h.jsx)("input",{type:"email",value:q.email,onChange:Fe("email"),placeholder:"Email address",className:i.textInput,required:!0}),(0,h.jsx)("input",{type:"text",value:q.mobileNo,onChange:Fe("mobileNo"),placeholder:"Mobile number (optional)",className:i.textInput}),(0,h.jsx)("input",{type:"text",value:q.branch,onChange:Fe("branch"),placeholder:"Branch (optional)",className:i.textInput}),(0,h.jsx)("input",{type:"text",value:q.experience,onChange:Fe("experience"),placeholder:"Experience (optional)",className:i.textInput}),(0,h.jsx)("button",{type:"submit",className:i.button,disabled:O,children:U?O?"Updating\u2026":"Update contact":O?"Saving\u2026":"Add contact"}),U&&(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Ee,disabled:O,children:"Cancel"})]}),(0,h.jsxs)("form",{className:i.form,onSubmit:Be,children:[(0,h.jsx)("input",{type:"text",value:H,onChange:e=>B(e.target.value),placeholder:"Search contacts...",className:i.textInput}),(0,h.jsx)("button",{type:"submit",className:i.buttonGhost,disabled:z,children:"Search"}),(G||H)&&(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Ge,disabled:z,children:"Clear"}),(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:We,disabled:z,children:"Refresh"})]}),z?(0,h.jsx)("p",{children:"Loading marketing contacts\u2026"}):0===T.length?(0,h.jsx)("p",{children:"No marketing contacts found."}):(0,h.jsx)("div",{className:i.tableContainer,children:(0,h.jsxs)("table",{className:i.table,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:i.tableHeader,children:"Name"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Email"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Mobile"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Branch"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Experience"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Created"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Actions"})]})}),(0,h.jsx)("tbody",{children:T.map(e=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:i.tableCell,children:e.fullName}),(0,h.jsx)("td",{className:i.tableCell,children:e.email}),(0,h.jsx)("td",{className:i.tableCell,children:e.mobileNo||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.branch||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.experience||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:p(e.createdAt)}),(0,h.jsx)("td",{className:i.tableCell,children:(0,h.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:()=>Ae(e),disabled:O&&U===e.id,children:"Edit"}),(0,h.jsx)("button",{type:"button",style:{background:"#ef4444",color:"#ffffff",border:"none",borderRadius:"8px",padding:"8px 14px",cursor:"pointer",fontWeight:600,opacity:Q===e.id?.7:1},onClick:()=>He(e.id),disabled:Q===e.id,children:Q===e.id?"Deleting\u2026":"Delete"})]})})]},e.id))})]})}),(0,h.jsxs)("div",{className:i.actionsRow,children:[(0,h.jsx)("span",{className:i.helperText,children:F.total>0?"Page ".concat(F.page," of ").concat(Math.max(F.totalPages,1)," \u2022 Total contacts: ").concat(F.total):"No contacts available"}),(0,h.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:ze,disabled:!F.hasPrevPage||z,children:"Previous"}),(0,h.jsx)("button",{type:"button",className:i.buttonGhost,onClick:Le,disabled:!F.hasNextPage||z,children:"Next"})]})]})]}):(0,h.jsx)("p",{children:"Please enter the admin key to manage marketing contacts."})]}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Fresher Jobs Queue"}),Qe?be?(0,h.jsx)("p",{children:"Loading fresher jobs\u2026"}):0===f.length?(0,h.jsx)("p",{children:"No fresher jobs found."}):(0,h.jsx)("div",{className:i.tableContainer,children:(0,h.jsxs)("table",{className:i.table,children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:i.tableHeader,children:"Title"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Company"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Location"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Experience"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Created"}),(0,h.jsx)("th",{className:i.tableHeader,children:"Notified"})]})}),(0,h.jsx)("tbody",{children:f.map(e=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{className:i.tableCell,children:e.title}),(0,h.jsx)("td",{className:i.tableCell,children:e.company||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.location||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:e.experience||"\u2014"}),(0,h.jsx)("td",{className:i.tableCell,children:p(e.createdAt)}),(0,h.jsx)("td",{className:i.tableCell,children:(0,h.jsx)("span",{className:"".concat(i.badge," ").concat(1===Number(e.notifySent)?i.badgeSuccess:i.badgeWarning),children:1===Number(e.notifySent)?"Sent":"Pending"})})]},e.id))})]})}):(0,h.jsx)("p",{children:"Please enter the admin key to load jobs."})]}),(0,h.jsxs)("div",{className:i.section,children:[(0,h.jsxs)("div",{className:i.actionsRow,children:[(0,h.jsx)("h2",{className:i.sectionTitle,children:"Recent Notification Logs"}),(0,h.jsx)("button",{onClick:()=>we(),className:i.buttonGhost,disabled:!Qe||pe,children:pe?"Refreshing\u2026":"Refresh logs"})]}),Qe?(0,h.jsxs)("div",{className:i.logColumns,children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:i.logTitle,children:"Successful deliveries"}),null!==(a=y.success)&&void 0!==a&&a.length?(0,h.jsx)("div",{className:i.logList,children:y.success.map((e,a)=>(0,h.jsxs)("div",{className:i.logSuccess,children:[(0,h.jsx)("div",{className:i.logTimestamp,children:e.timestamp||"Unknown time"}),(0,h.jsx)("div",{className:i.logStatus,children:e.status}),e.meta&&(0,h.jsx)("div",{className:i.logMeta,children:"string"===typeof e.meta?e.meta:JSON.stringify(e.meta)})]},"success-".concat(a)))}):(0,h.jsx)("p",{className:i.mutedText,children:"No success logs yet."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:i.logTitle,children:"Failures & warnings"}),null!==(t=y.failed)&&void 0!==t&&t.length?(0,h.jsx)("div",{className:i.logList,children:y.failed.map((e,a)=>(0,h.jsxs)("div",{className:i.logFailure,children:[(0,h.jsx)("div",{className:i.logTimestamp,children:e.timestamp||"Unknown time"}),(0,h.jsx)("div",{className:i.logStatus,children:e.status}),e.meta&&(0,h.jsx)("div",{className:i.logMeta,children:"string"===typeof e.meta?e.meta:JSON.stringify(e.meta)})]},"failed-".concat(a)))}):(0,h.jsx)("p",{className:i.mutedText,children:"No failure logs captured."})]})]}):(0,h.jsx)("p",{children:"Please enter the admin key to view logs."})]})]})})}}}]);
//# sourceMappingURL=30.d079147a.chunk.js.map